<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/article"></ion-back-button>
    </ion-buttons>
    <ion-title class="ion-no-padding">מאמר</ion-title>
    <ion-icon class="title-icon" slot="start" name="newspaper-outline"></ion-icon>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="12" size-sm="8" offset-sm="2" class="ion-text-center">
        <div class="container ion-padding">
        <ion-text>
          <h1>{{ article.title }}</h1>
        </ion-text>
        <ion-text>
          <h3>{{ article.subtitle }}</h3>
        </ion-text>
        <ion-text>
          <p>נכתב ע"י {{ getAuthorFullName() }} בתאריך {{ article.date | date  }}</p>
        </ion-text>
        <ion-textarea>{{ article.body }}</ion-textarea>
      </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="8" offset-sm="2" class="ion-text-center">
        <ion-list *ngIf="article.comments.length > 0">
          <div class="comment-item" *ngFor="let comment of article.comments">
            <app-comment [comment]="comment"></app-comment>
          </div>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="12" size-sm="8" offset-sm="2" class="ion-text-center">
        <form #f="ngForm" (ngSubmit)="onSubmit(f)" class="comment-form">
                <ion-list class="ion-padding">
                  <ion-item lines="none">
                    <ion-title class="ion-no-padding">הוסף תגובה</ion-title>
                  </ion-item>
                  <ion-item>
                    <ion-label position="floating">כותרת<ion-text color="danger">*</ion-text></ion-label>
                    <ion-input
                      type="text"
                      ngModel
                      name="title"
                      required
                      #titleCtrl="ngModel"
                    ></ion-input>
                    <ion-icon name="text-outline" slot="end" position="floating" class="ion-align-self-center"></ion-icon>
                  </ion-item>
                  <ion-item
                  *ngIf="!titleCtrl.valid && titleCtrl.touched"
                  lines="none">
                  <ion-label color="danger">
                    זהו שדה חובה!
                  </ion-label>
                </ion-item>
                  <ion-item>
                    <ion-label position="floating"> תגובה <ion-text color="danger">*</ion-text></ion-label>
                    <ion-textarea
                      auto-grow="true"
                      ngModel
                      name="body"
                      required
                      #bodyCtrl="ngModel"
                    ></ion-textarea>
                    <ion-icon name="create-outline" slot="end" position="floating" class="ion-align-self-center"></ion-icon>
                  </ion-item>
                  <ion-item
                  *ngIf="!bodyCtrl.valid && bodyCtrl.touched"
                  lines="none">
                  <ion-label color="danger">
                    זהו שדה חובה!
                  </ion-label>
                </ion-item >
                <ion-button
                  class="ion-float-end"
                  type="submit"
                  color="primary"
                  slot="start"
                  [disabled]="!f.valid"
                >
                שלח תגובה
                </ion-button>
              </ion-list>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
